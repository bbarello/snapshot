{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport { FiCheck } from 'react-icons/fi';\nimport { toast } from 'react-toastify';\nimport Head from 'next/head';\nimport { useQuery, gql } from '@apollo/client';\nimport { useRouter } from 'next/router';\nimport { Button } from 'baseui/button';\nimport { Select } from 'baseui/select';\nimport { Input } from 'baseui/input';\nimport PageTitle from 'components/UiElements/PageTitle/PageTitle';\nimport Container from 'components/UiElements/Container/Container';\nimport Carousel, { Slide } from 'components/UiElements/Carousel/Carousel';\nimport useDirection from '../../utils/useDirection';\nimport { withApollo } from '../../apollo/client';\nimport Wrapper, { MediaWrapper, Image, ContentWrapper, List, ListItem, ProductTitle, ProductPrice, ProductDescription } from '../../components/PageStyles/Product.styled';\nimport { useCartDispatch } from '../../contexts/cart/cart.provider';\nconst GET_PRODUCT = gql`\n\tquery getProductBySlug($slug: String!) {\n\t\tproduct(slug: $slug) {\n\t\t\tid\n\t\t\tname\n\t\t\tslug\n\t\t\tprice\n\t\t\tthumbnail\n\t\t\tgallery {\n\t\t\t\turl\n\t\t\t}\n\t\t\tcolors {\n\t\t\t\tid\n\t\t\t\tlabel\n\t\t\t}\n\t\t\tfeatures\n\t\t\tdescription\n\t\t}\n\t}\n`;\ntoast.configure();\n\nconst ProductSingle = () => {\n  const {\n    query: {\n      slug\n    }\n  } = useRouter();\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(GET_PRODUCT, {\n    variables: {\n      slug\n    },\n    notifyOnNetworkStatusChange: true\n  });\n  const dispatch = useCartDispatch();\n  const {\n    0: color,\n    1: setColor\n  } = useState([{\n    label: 'Black',\n    id: 'black',\n    code: '#000'\n  }]);\n  const {\n    0: quantity,\n    1: setQuantity\n  } = useState('1');\n  const [direction] = useDirection();\n  console.log(color, quantity, 'color');\n  if (!data) return null;\n  const {\n    id,\n    name,\n    description,\n    price,\n    thumbnail,\n    colors,\n    gallery,\n    features\n  } = data.product;\n\n  function handleAddToCart() {\n    const item = {\n      id,\n      name,\n      thumbnail,\n      color: color.length !== 0 ? color[0].id : undefined,\n      quantity,\n      price\n    };\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: item\n    });\n    toast('Added to the bag', {\n      progressClassName: 'fancy-progress-bar',\n      position: 'top-right',\n      autoClose: 2000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  console.log(data, 'data');\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, name, \" \"), __jsx(\"meta\", {\n    name: \"Description\",\n    content: description\n  })), __jsx(PageTitle, {\n    title: name,\n    subtitle: \"Awesome GitHub T-shirts and other cool swag\"\n  }), __jsx(Container, null, __jsx(Wrapper, null, __jsx(MediaWrapper, null, gallery && gallery.length !== 0 ? __jsx(Carousel, {\n    options: {\n      direction\n    },\n    controls: false,\n    carouselSelector: \"productGallery\",\n    thumbs: gallery\n  }, gallery.map((item, index) => __jsx(Slide, {\n    key: `gallery-key${index}`\n  }, __jsx(\"img\", {\n    src: item.url,\n    alt: \"Gallery\"\n  })))) : __jsx(Image, {\n    src: thumbnail,\n    alt: name\n  })), __jsx(ContentWrapper, null, __jsx(ProductTitle, null, name), __jsx(ProductPrice, null, \"$ \", price), __jsx(Input, {\n    value: quantity,\n    onChange: e => setQuantity(e.target.value),\n    type: \"number\",\n    overrides: {\n      Root: {\n        style: () => {\n          return {\n            width: '100%',\n            marginBottom: '30px',\n            '@media only screen and (min-width: 376px)': {\n              maxWidth: '240px'\n            }\n          };\n        }\n      },\n      InputContainer: {\n        style: () => {\n          return {\n            backgroundColor: 'transparent'\n          };\n        }\n      }\n    }\n  }), colors && __jsx(Select, {\n    options: colors,\n    placeholder: \"Select color\",\n    value: color,\n    onChange: params => setColor(params.value),\n    overrides: {\n      Root: {\n        style: () => {\n          return {\n            width: '100%',\n            '@media only screen and (min-width: 376px)': {\n              maxWidth: '240px'\n            }\n          };\n        }\n      },\n      ControlContainer: {\n        style: () => {\n          return {\n            backgroundColor: 'transparent'\n          };\n        }\n      }\n    }\n  }), features && __jsx(List, null, features.map((item, index) => __jsx(ListItem, {\n    key: `${slug}_key ${index}`\n  }, __jsx(FiCheck, null), \"\\xA0 \", item))), description && __jsx(ProductDescription, null, description), __jsx(Button, {\n    onClick: handleAddToCart,\n    overrides: {\n      BaseButton: {\n        style: ({\n          $theme\n        }) => {\n          return _objectSpread(_objectSpread({}, $theme.typography.font450), {}, {\n            width: '100%',\n            '@media only screen and (min-width: 376px)': _objectSpread({\n              maxWidth: '240px'\n            }, $theme.typography.font250)\n          });\n        }\n      }\n    }\n  }, \"Add to cart\")))));\n};\n\nexport default withApollo(ProductSingle);","map":null,"metadata":{},"sourceType":"module"}